(window.webpackJsonp=window.webpackJsonp||[]).push([[402],{1349:function(e,t,r){"use strict";r.d(t,"a",(function(){return w}));r(42),r(61),r(21),r(104);var n=r(2),a=r.n(n),c=r(27),s=r.n(c),u=r(269),o=(r(48),r(15)),i=r(277),p=r.n(i),f=r(22);function b(e){return d.apply(this,arguments)}function d(){return(d=Object(o.a)(a.a.mark((function e(t){var r,n,c,u,o,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.ok,n=t.status,c=t.statusText,u={ok:r,status:n,statusText:c},o="",e.prev=3,e.next=6,t.text();case 6:if(o=e.sent,r){e.next=9;break}return e.abrupt("return",s()({},u,{data:{text:o}}));case 9:return i=JSON.parse(o),e.abrupt("return",s()({},u,{data:i}));case 13:return e.prev=13,e.t0=e.catch(3),e.abrupt("return",s()({},u,{data:{text:o}}));case 16:case"end":return e.stop()}}),e,null,[[3,13]])})))).apply(this,arguments)}var O=r(25),v=r.n(O);function x(e,t){return v()(t).call(t,(function(t,r){var n,a=e.headers.get(r);return s()({},t,((n={})[r]=a,n))}),{})}function w(e,t){return h.apply(this,arguments)}function h(){return(h=Object(o.a)(a.a.mark((function e(t,r){var n,c,o,i,d,O,v,w;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===r&&(r={}),n=(new Date).getTime(),c=t.responseHeaders,o=Object(u.a)(t,["responseHeaders"]),i=p.a.format(o),d=Object(f.createLogger)("dal",{url:i}),e.prev=5,e.next=8,fetch(i,r);case 8:return O=e.sent,e.next=11,b(O);case 11:return v=e.sent,c&&(w=x(O,c),v.data=s()({},v.data,{responseHeaders:w})),d.info({responseTime:(new Date).getTime()-n,fetchOptions:r},"dal request"),e.abrupt("return",v);case 17:e.prev=17,e.t0=e.catch(5),e.t1=!0,e.next=e.t1===("FetchError"===e.t0.name&&"request-timeout"===e.t0.type)?22:e.t1===("FetchError"===e.t0.name&&"invalid-json"===e.t0.type)?23:24;break;case 22:throw new Error("Timeout exceeded for "+i);case 23:throw new Error("Got non-JSON or invalid JSON response for "+i);case 24:throw e.t0;case 25:case"end":return e.stop()}}),e,null,[[5,17]])})))).apply(this,arguments)}},1924:function(e,t,r){"use strict";r.r(t),r.d(t,"clientLoader",(function(){return k}));var n=r(2),a=r.n(n),c=(r(48),r(15)),s=r(6),u=r(118),o=r(1349),i=r(821),p=Object(i.a)("UPS2","HOST","PURCHASE"),f=Object(i.a)("UPS2","PROTOCOL","PURCHASE","https");var b=r(58),d=a.a.mark(w),O=a.a.mark(h),v=a.a.mark(j),x=a.a.mark(l);function w(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(s.c)(j);case 2:return e.next=4,Object(s.c)(h);case 4:case"end":return e.stop()}}),d)}function h(){var e,t,r,n,c;return a.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(s.i)(u.g);case 2:return e=a.sent,a.next=5,Object(s.i)(u.f);case 5:if(t=a.sent,r=Object(u.d)(t),n=Object(u.b)(t),c=r&&!n,!e||!c){a.next=12;break}return a.next=12,Object(s.c)(l);case 12:case"end":return a.stop()}}),O)}function j(){var e,t,r,n,c,o,i,p,f;return a.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(s.i)(u.g);case 2:if(e=a.sent,t=window,r=t.SubsSdk,!e||!r){a.next=15;break}return a.next=7,Object(s.i)(u.f);case 7:return n=a.sent,c=Object(u.b)(n),o=Object(b.getEnv)("PIANO_APP_ID"),i=Object(b.getEnv)("PIANO_TINYPASS_HOST"),p=Object(b.getEnv)("PIANO_WX_API_HOST"),f=c,a.next=15,Object(s.c)([r,r.init],{pianoAppID:o,tinyPassHost:i,pianoKeyHost:p,disableAdBlocker:f});case 15:case"end":return a.stop()}}),v)}function l(){var e;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e={host:p,protocol:f,pathname:"/purchase/token"},t.next=3,Object(s.c)(o.a,e,{credentials:"include"});case 3:case"end":return t.stop()}}),x)}function k(e){return m.apply(this,arguments)}function m(){return(m=Object(c.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.runSaga(w);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},821:function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));var n=r(58),a=function(e,t,r,a){var c=r?r+"_":"",s=e+"_"+t;return n.env[""+c+s+"_CLIENT"]||n.env[s+"_CLIENT"]||a}}}]);
//# sourceMappingURL=402.subscription.2f289a4c13f0ce3f78bf.js.map